# Execution Tickets（ET）

> [!WARNING]
> 本文档涉及一个活跃的研究领域，可能在阅读时已过时，并会随着 ePBS、ET 和 Inclusion Lists（IL）的设计空间演变而更新。

## 路线图跟踪器

| 升级  |      URGE      |   跟踪   |         主题         |                                                        交叉引用                                                        |
| :--: | :-----------: | :-----: | :-----------------: | :------------------------------------------------------------------------------------------------: |
|  ET  | the Scourge  | MEV 轨道 | 终局区块生产流水线 | 交叉参考：[IL](/wiki/research/inclusion-lists.md)、[ePBS](/wiki/research/PBS/ePBS.md)、[PEPC](/wiki/research/PBS/PEPC.md) |

## 相关背景

最近对**内置提议者-构建者分离（PBS）**的提案和开发，旨在减少执行区块构建对少数中心化的、链下实体（中继器）的依赖。这些中继器在当前 MEV 体系下充当验证者（作为区块提议者）和专业化的、高级区块构建者之间的中介。

目前，借助 [MEV-boost](/wiki/research/PBS/mev-boost.md)，验证者作为提议者放弃了执行区块的构建权利，通过**开放竞价的无许可拍卖**，由构建者提供一个精心排序的区块，并支付相应费用。

![MEV-boost](/docs/wiki/research/img/MEV-boost.webp)

## 证明者-提议者分离（APS）即验证者-提议者分离

MEV-boost 是协议外的附加组件，不受协议的直接控制。PBS 通过 [APS](#证明者-提议者分离-aps-即验证者-提议者分离) 设计理念，试图将部分基础设施纳入协议。

APS 设计理念与**内置提议者-构建者分离（ePBS）**密切相关。

根据 ePBS 相关资料 [[1]](#资源) 和 Barnabé 关于 PBS 的笔记 [[2]](#资源)，我们可以识别 ePBS 的两个主要组成部分：

1. **市场结构**——参与市场的各方及其交互条件。
2. **分配机制**——参与方可以签订的合约类型。

目前提议的 ePBS 方案同时内置了市场结构和分配机制，这两个部分主要继承自 MEV-Boost。

- **验证者作为提议者，将其区块生产权利拍卖给构建者。**
- 这一机制相比当前的 MEV-Boost 方案有所改进，因为它将验证者的角色拆分为提议者和构建者，提升了构建者的公平竞争环境，并由协议定义一个**无信任的市场结构**，以确保市场参与者之间的**公平交换**。
- 然而，该方案仍然需要类似于 MEV-Boost 的复杂公平交换机制，只是复杂性被移入协议内部。

Barnabé 指出 [[3]](#资源)，当前的 ePBS 版本未能解答一些基本问题：

- 我们认为 MEV-Boost 过于中心化的原因是**市场结构**还是**分配机制**？
- 如果问题出在市场结构上，为什么要内置一种我们已经视为**技术债务**（即漏洞）和**错误设计理念**的机制？
- **协议是否应该仅关注“提议权”的分配，而不涉及“构建权”的分配？**

![两种世界观对比](/docs/wiki/research/img/ET_2worlds.webp)

### APS 市场结构的分配机制

一个**无许可市场**允许买家购买执行区块提议权。这些权利赋予持票者（可以是非验证者）一个随机分配的提议时机。

![ET vs PBS](/docs/wiki/research/img/ETvsPBS.webp)

### **区块拍卖 ePBS vs 插槽拍卖 ePBS**

![](/docs/wiki/research/img/ba-ePBS.webp)
![](/docs/wiki/research/img/sa-ePBS.webp)

sa-ePBS 带来的改进同时引入了**处理等值性和头部分裂视图的技术挑战**，这一问题仍然未解决，详见[开放问题](#开放问题)。

[ET](#execution-tickets-et) 和 [APS-Burn](/wiki/research/APS/aps.md) 是实现**协议内证明者-提议者分离（APS）**的两种可能分配机制。

## Execution Tickets（ET）

ET 采用了一种**新的范式**：

- **验证者/证明者-提议者分离**，其中提议者由协议选定，并可以再次将区块构建任务委托给构建者。
- **信标区块的发布仍然是验证者的特权**。
- **ET 允许执行提议者从内置的无许可市场购买“票据”**，以在未来某个不确定时间兑换执行提议权。

### **ET 如何遏制时序博弈？**

时序博弈指的是**提议者尽可能延迟区块提议，以最大化收益**。在区块拍卖 ePBS 方案中，执行区块在信标区块发布时就已确定，因此验证者可能会**故意延迟信标区块的发布**，以等待更高出价。

ET 提供了更彻底的**共识-执行分离**，即**验证者作为提议者无需承诺执行区块内容**，从而将时序博弈限制在执行提议阶段，确保共识关键功能不受验证者的逐利行为影响。

![](/docs/wiki/research/img/ET.webp)

## **ET 运行机制**

ET 机制简要描述如下 [[4]](#资源)：

- **内置市场**：用于买卖票据，持票者可在**随机分配的时隙**中使用一次。
- **提议者抽签**：现有 PoS 机制决定信标区块提议者和证明者。
- **执行区块提议者抽签**：额外抽签决定执行区块提议权。

## **ET 流程**

1. 信标提议者发布包含**包含列表**的信标区块。
2. 信标证明者投票验证区块的有效性和及时性。
3. 抽签选出执行提议者，由其发布执行区块。
4. 执行证明者投票验证执行区块的有效性和及时性。

![](/docs/wiki/research/img/ETflow.jpeg)

## **开放问题**

- ET 市场如何设计，票据定价机制如何运作？
- ET 可能导致多条有效分支，如何调整**分叉选择规则**？
- 如何设计**第二层权益证明机制**以支持 ET？

## **资源**

[[1] ePBS 相关文档](/docs/wiki/research/PBS/ePBS.md)

[[2] Barnabé 的 PBS 研究笔记](https://barnabe.substack.com/p/pbs)

[[4] ethresearch 讨论 ET](https://ethresear.ch/t/execution-tickets/17944)

