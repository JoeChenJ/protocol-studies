# 轻客户端

> ⚠️ 这是一篇[小作品](https://en.wikipedia.org/wiki/Wikipedia:Stub)，欢迎通过[贡献](/contributing.md)来扩展内容。

以太坊用户通过执行客户端 RPC 连接到网络，这使得他们能够与网络互动，查看余额、提交交易等。运行客户端并验证当前状态可能是一个要求较高的任务，需要数百 GB 的存储空间、带宽和计算能力。大多数钱包默认使用第三方 API 连接到网络，但不验证提供的数据。

轻客户端的理念是让用户可以无需运行完整节点的开销，便能以无需信任的方式访问网络。轻客户端是这一概念的通用术语，但实际的方法有多种不同的设计。目前已有多种轻客户端，一些已经投入生产使用，另一些仍在研究和开发阶段。

- 使用来自共识层（CL）客户端的 Beacon 根验证执行层（EL）RPC 数据
- 无状态客户端
- LES 协议
- Portal 网络

## RPC 代理轻客户端

这种类型的轻客户端连接到 RPC 提供者，并通过使用来自独立 Beacon 节点的证明来验证响应，从而提高安全性。它本质上是一个 RPC 代理或中间件，确保提供者的数据是有效的。  
这种方式改善了钱包/服务与第三方 RPC 连接的信任模型，但它并不充当网络中的节点。采用这种轻客户端方法，用户仍然需要连接到某个 RPC 提供者，即一个中心化实体。

在通过 p2p 协议在网络中进行通信的客户端中，没有专门用于处理特定数据块（例如 RPC）的功能。它们可以从对等节点获取当前的最新区块、请求历史区块等。而要验证这些数据，它们同样需要连接到共识客户端。通过 p2p 请求某个地址的余额是不可能的，用户只能下载区块/状态，验证并自行查找。在这种方法下，我们基本上得到了网络中正常节点的行为。

RPC 验证的“轻客户端”的实现例如[Helios](https://github.com/a16z/helios)或[Kevlar](https://github.com/lightclients/kevlar)。用户可以将它们作为应用程序/钱包与 RPC 提供者之间的代理运行。它们提供默认连接到公共 Beacon 节点的功能，因此这两个提供者以相同方式撒谎的机会极小。有一个[项目尝试在 Helios 中实现 CL p2p](https://github.com/eth-protocol-fellows/cohort-three/blob/master/projects/helios-cl-p2p.md)，旨在直接使用 cl libp2p，而不是依赖第三方 Beacon API。

## 无状态客户端

使用通过 p2p 网络传递的见证者来验证数据，而无需完整的状态。

## Portal 网络

Portal 创建了一个覆盖网络，概率性地保证数据完整性。

## LES

由 Geth 首创的轻客户端模式使得节点可以在轻配置下运行，订阅 les p2p 协议。该节点不会下载整个链，仅下载来自其他节点提供的最新数据。完整节点需要配置为提供 les 数据，这不是默认选项。因此，网络中没有足够的 les 提供者，导致使用 Geth 的轻模式不够可靠。
